{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/avatar/style\";import _Avatar from\"antd/es/avatar\";import _slicedToArray from\"/Users/Timbet.Ekanem/Downloads/e-health/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';var anonymousImg=\"\".concat(window.origin,\"/content/anonymous-400.jpg\");var ImageLoader=function ImageLoader(_ref){var src=_ref.src,_ref$size=_ref.size,size=_ref$size===void 0?40:_ref$size,_ref$onLoad=_ref.onLoad,onLoad=_ref$onLoad===void 0?function(){return null;}:_ref$onLoad;var input=useRef(null);var _useState=useState(anonymousImg),_useState2=_slicedToArray(_useState,2),img=_useState2[0],setImg=_useState2[1];useEffect(function(){if(!src){onLoad(img);}return function(){setImg(null);};},[]);var handleClick=function handleClick(){return input.current.click();};var handleLoad=function handleLoad(e){var file=e.target.files[0];var reader=new FileReader();reader.onloadend=function(){var result=reader.result;onLoad(result);setImg(result);};reader.readAsDataURL(file);};var icon=/*#__PURE__*/React.createElement(\"span\",{className:\"icofont icofont-ui-user ml-2\"});return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"input\",{ref:input,onChange:handleLoad,type:\"file\",style:{display:'none'}}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(_Avatar,{src:src||img,size:size,className:\"mr-4\"}),/*#__PURE__*/React.createElement(_Button,{type:'primary',className:\"btn-outline\",onClick:handleClick},\"Select image \",icon)));};export default ImageLoader;","map":{"version":3,"sources":["/Users/Timbet.Ekanem/Downloads/e-health/frontend/src/layout/components/patients/ImageLoader.tsx"],"names":["React","useEffect","useRef","useState","anonymousImg","window","origin","ImageLoader","src","size","onLoad","input","img","setImg","handleClick","current","click","handleLoad","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","icon","display"],"mappings":"ySAAA,MAAOA,CAAAA,KAAP,EAA6BC,SAA7B,CAAwCC,MAAxC,CAAgDC,QAAhD,KAAgE,OAAhE,CAIA,GAAMC,CAAAA,YAAY,WAAMC,MAAM,CAACC,MAAb,8BAAlB,CAQA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAAoD,IAAjDC,CAAAA,GAAiD,MAAjDA,GAAiD,gBAA5CC,IAA4C,CAA5CA,IAA4C,oBAArC,EAAqC,4BAAjCC,MAAiC,CAAjCA,MAAiC,sBAAxB,iBAAM,KAAN,EAAwB,aACtE,GAAMC,CAAAA,KAAK,CAAGT,MAAM,CAAmB,IAAnB,CAApB,CACA,cAAsBC,QAAQ,CAASC,YAAT,CAA9B,wCAAOQ,GAAP,eAAYC,MAAZ,eAEAZ,SAAS,CAAC,UAAM,CACd,GAAI,CAACO,GAAL,CAAU,CACRE,MAAM,CAACE,GAAD,CAAN,CACD,CAED,MAAO,WAAM,CACXC,MAAM,CAAC,IAAD,CAAN,CACD,CAFD,CAGD,CARQ,CAQN,EARM,CAAT,CAUA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,SAAMH,CAAAA,KAAK,CAACI,OAAN,CAAcC,KAAd,EAAN,EAApB,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAsC,CACvD,GAAIC,CAAAA,IAAU,CAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAjB,CACA,GAAIC,CAAAA,MAAkB,CAAG,GAAIC,CAAAA,UAAJ,EAAzB,CAEAD,MAAM,CAACE,SAAP,CAAmB,UAAM,CACvB,GAAMC,CAAAA,MAAM,CAAGH,MAAM,CAACG,MAAtB,CAEAf,MAAM,CAACe,MAAD,CAAN,CACAZ,MAAM,CAACY,MAAD,CAAN,CACD,CALD,CAOAH,MAAM,CAACI,aAAP,CAAqBP,IAArB,EACD,CAZD,CAcA,GAAMQ,CAAAA,IAAI,cAAG,4BAAM,SAAS,CAAC,8BAAhB,EAAb,CAEA,mBACE,qDACE,6BAAO,GAAG,CAAEhB,KAAZ,CAAmB,QAAQ,CAAEM,UAA7B,CAAyC,IAAI,CAAC,MAA9C,CAAqD,KAAK,CAAE,CAAEW,OAAO,CAAE,MAAX,CAA5D,EADF,cAEE,2BAAK,SAAS,CAAC,2BAAf,eACE,6BAAQ,GAAG,CAAEpB,GAAG,EAAII,GAApB,CAAyB,IAAI,CAAEH,IAA/B,CAAqC,SAAS,CAAC,MAA/C,EADF,cAGE,6BAAQ,IAAI,CAAE,SAAd,CAAyB,SAAS,CAAC,aAAnC,CAAiD,OAAO,CAAEK,WAA1D,kBACgBa,IADhB,CAHF,CAFF,CADF,CAYD,CA5CD,CA8CA,cAAepB,CAAAA,WAAf","sourcesContent":["import React, { ChangeEvent, useEffect, useRef, useState } from 'react';\n\nimport { Avatar, Button } from 'antd';\n\nconst anonymousImg = `${window.origin}/content/anonymous-400.jpg`;\n\ntype Props = {\n  src?: string;\n  size?: number;\n  onLoad?: (img) => void;\n};\n\nconst ImageLoader = ({ src, size = 40, onLoad = () => null }: Props) => {\n  const input = useRef<HTMLInputElement>(null);\n  const [img, setImg] = useState<string>(anonymousImg);\n\n  useEffect(() => {\n    if (!src) {\n      onLoad(img);\n    }\n\n    return () => {\n      setImg(null);\n    };\n  }, []);\n\n  const handleClick = () => input.current.click();\n\n  const handleLoad = (e: ChangeEvent<HTMLInputElement>) => {\n    let file: File = e.target.files[0];\n    let reader: FileReader = new FileReader();\n\n    reader.onloadend = () => {\n      const result = reader.result as string;\n\n      onLoad(result);\n      setImg(result);\n    };\n\n    reader.readAsDataURL(file);\n  };\n\n  const icon = <span className='icofont icofont-ui-user ml-2' />;\n\n  return (\n    <>\n      <input ref={input} onChange={handleLoad} type='file' style={{ display: 'none' }} />\n      <div className='d-flex align-items-center'>\n        <Avatar src={src || img} size={size} className='mr-4' />\n\n        <Button type={'primary'} className='btn-outline' onClick={handleClick}>\n          Select image {icon}\n        </Button>\n      </div>\n    </>\n  );\n};\n\nexport default ImageLoader;\n"]},"metadata":{},"sourceType":"module"}