{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/Timbet.Ekanem/Downloads/e-health/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _toConsumableArray from\"/Users/Timbet.Ekanem/Downloads/e-health/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/Timbet.Ekanem/Downloads/e-health/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/Timbet.Ekanem/Downloads/e-health/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{withRouter}from'react-router-dom';import classNames from'../../../utils/class-names';import MenuGroupTitle from'./GroupTitle';import ItemWithSub from'./ItemWithSub';import SimpleItem from'./SimpleItem';import'./Menu.scss';var haveActive=function haveActive(sub,route){return!!sub.find(function(item){return item.routing===route;});};var Menu=function Menu(_ref){var data=_ref.data,orientation=_ref.orientation,location=_ref.location,children=_ref.children,className=_ref.className,onCloseSidebar=_ref.onCloseSidebar,opened=_ref.opened;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),menu=_useState2[0],setMenu=_useState2[1];useEffect(function(){setMenu(data);},[data]);useEffect(function(){var currentRoute=location.pathname.split('/')[2];var updatedMenu=data?data.map(function(item){if(item.sub){return _objectSpread(_objectSpread({},item),{},{active:haveActive(item.sub,currentRoute)});}return _objectSpread(_objectSpread({},item),{},{active:item.routing===currentRoute});}):[];setMenu(updatedMenu);},[location,data]);useEffect(function(){onCloseSidebar&&opened&&onCloseSidebar();},[location]);var handleItemClick=function handleItemClick(itemTitle){var updateMenu=_toConsumableArray(menu);var _iterator=_createForOfIteratorHelper(updateMenu),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value;if(item.title!==itemTitle){continue;}item.active=!item.active;break;}}catch(err){_iterator.e(err);}finally{_iterator.f();}setMenu(updateMenu);};var menuClasses=classNames({'main-menu':true,horizontal:orientation==='horizontal'});var menuItems=menu.map(function(item,i){if(item.groupTitle){return/*#__PURE__*/React.createElement(MenuGroupTitle,{key:i,title:item.title});}if(item.sub){return/*#__PURE__*/React.createElement(ItemWithSub,{key:i,layout:orientation,sub:item.sub,title:item.title,location:location,opened:item.active,onClick:handleItemClick});}return/*#__PURE__*/React.createElement(SimpleItem,{key:i,icon:item.icon,layout:orientation,title:item.title,routing:item.routing});});return/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(menuClasses,\" \").concat(!!className&&className)},children,!!menuItems.length&&/*#__PURE__*/React.createElement(\"nav\",{className:\"main-menu-wrap\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"menu-ul\"},menuItems)));};export default withRouter(Menu);","map":{"version":3,"sources":["/Users/Timbet.Ekanem/Downloads/e-health/frontend/src/layout/components/menu/Menu.tsx"],"names":["React","useEffect","useState","withRouter","classNames","MenuGroupTitle","ItemWithSub","SimpleItem","haveActive","sub","route","find","item","routing","Menu","data","orientation","location","children","className","onCloseSidebar","opened","menu","setMenu","currentRoute","pathname","split","updatedMenu","map","active","handleItemClick","itemTitle","updateMenu","title","menuClasses","horizontal","menuItems","i","groupTitle","icon","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nimport { withRouter } from 'react-router-dom';\r\nimport { IMenuItem, IMenuItemSub } from '../../../interfaces/main-menu';\r\n\r\nimport classNames from '../../../utils/class-names';\r\n\r\nimport MenuGroupTitle from './GroupTitle';\r\nimport ItemWithSub from './ItemWithSub';\r\nimport SimpleItem from './SimpleItem';\r\n\r\nimport './Menu.scss';\r\n\r\ntype MenuProps = {\r\n  orientation?: 'vertical' | 'horizontal';\r\n  data?: IMenuItem[];\r\n  children?: any;\r\n  opened?: boolean;\r\n  onCloseSidebar?: () => void;\r\n  className?: string;\r\n};\r\n\r\ntype RouterProps = {\r\n  location: Location;\r\n};\r\n\r\ntype Props = RouterProps & MenuProps | any;\r\n\r\nconst haveActive = (sub: IMenuItemSub[], route: string) =>\r\n  !!sub.find(item => item.routing === route);\r\n\r\nconst Menu = ({\r\n  data,\r\n  orientation,\r\n  location,\r\n  children,\r\n  className,\r\n  onCloseSidebar,\r\n  opened\r\n}: Props) => {\r\n  const [menu, setMenu] = useState<IMenuItem[]>([]);\r\n\r\n  useEffect(() => {\r\n    setMenu(data);\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    const currentRoute = location.pathname.split('/')[2];\r\n\r\n    const updatedMenu = data\r\n      ? data.map(item => {\r\n          if (item.sub) {\r\n            return { ...item, active: haveActive(item.sub, currentRoute) };\r\n          }\r\n\r\n          return { ...item, active: item.routing === currentRoute };\r\n        })\r\n      : [];\r\n\r\n    setMenu(updatedMenu);\r\n  }, [location, data]);\r\n\r\n  useEffect(() => {\r\n    onCloseSidebar && opened && onCloseSidebar();\r\n  }, [location]);\r\n\r\n  const handleItemClick = (itemTitle: string) => {\r\n    const updateMenu = [...menu];\r\n\r\n    for (let item of updateMenu) {\r\n      if (item.title !== itemTitle) {\r\n        continue;\r\n      }\r\n\r\n      item.active = !item.active;\r\n      break;\r\n    }\r\n\r\n    setMenu(updateMenu);\r\n  };\r\n\r\n  const menuClasses = classNames({\r\n    'main-menu': true,\r\n    horizontal: orientation === 'horizontal'\r\n  });\r\n\r\n  const menuItems = menu.map((item: IMenuItem, i: number) => {\r\n    if (item.groupTitle) {\r\n      return <MenuGroupTitle key={i} title={item.title} />;\r\n    }\r\n\r\n    if (item.sub) {\r\n      return (\r\n        <ItemWithSub\r\n          key={i}\r\n          layout={orientation}\r\n          sub={item.sub}\r\n          title={item.title}\r\n          location={location}\r\n          opened={item.active}\r\n          onClick={handleItemClick}\r\n        />\r\n      );\r\n    }\r\n\r\n    return (\r\n      <SimpleItem\r\n        key={i}\r\n        icon={item.icon}\r\n        layout={orientation}\r\n        title={item.title}\r\n        routing={item.routing}\r\n      />\r\n    );\r\n  });\r\n\r\n  return (\r\n    <div className={`${menuClasses} ${!!className && className}`}>\r\n      {children}\r\n      {!!menuItems.length && (\r\n        <nav className='main-menu-wrap'>\r\n          <ul className='menu-ul'>{menuItems}</ul>\r\n        </nav>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default withRouter(Menu);\r\n"]},"metadata":{},"sourceType":"module"}